<launch>

<node name= "visualization" pkg= "virtual_blinker" type="visualization.py" output="screen" cwd="node"/>
<node name="rviz" pkg="rviz" type="rviz" args="-d $(find virtual_blinker)/config.rviz" />


<arg name="nr_cars" default="4"/>

<param name="car1" type="string" value="north left 50"/>
<param name="car2" type="string" value="south left 50"/>
<param name="car3" type="string" value="east left 50"/>
<param name="car4" type="string" value="west left 50"/>

<node if="$(eval nr_cars >= 1)" name="car1" pkg="virtual_blinker" type="sim.py" output="screen" cwd="node"/>
<node if="$(eval nr_cars >= 2)" name="car2" pkg="virtual_blinker" type="sim.py" output="screen" cwd="node"/>
<node if="$(eval nr_cars >= 3)" name="car3" pkg="virtual_blinker" type="sim.py" output="screen" cwd="node"/>
<node if="$(eval nr_cars >= 4)" name="car4" pkg="virtual_blinker" type="sim.py" output="screen" cwd="node"/>


<param name="nr_cars" type="int" value="$(arg nr_cars)"/>


</launch>